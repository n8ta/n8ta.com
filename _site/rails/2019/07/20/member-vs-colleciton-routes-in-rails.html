<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111016820-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-111016820-3');
    </script>
    <link rel="stylesheet" href="/assets/css/styles.css"/>

    <link rel="stylesheet" href="/assets/css/atom-one-dark.css">
    <script src="/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header-and-page">
    <a id='homepage-link' href="/"><h1>Nate Tracy-Amoroso</h1></a>
    <div>
        <a href="/">Home</a> > The difference between member and collections routes in rails

<article class="post">
<p>Rails resources are fantastic but the docs can be a little lacking in depth. Unfortunately it’s not exactly clear from the docs how you can create a route like /documents/trash without the show route getting in the way.</p>

<p>I recently found myself in the situation where I wanted to create these two routes:</p>

<figure class="highlight"><pre><code class="language-url" data-lang="url">/documents/trash</code></pre></figure>

<figure class="highlight"><pre><code class="language-url" data-lang="url">/documents/1/</code></pre></figure>

<p>In order to help a user easily restore deleted documents.</p>

<p>My naive implementation was using a member route, take a look:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="n">get</span> <span class="s1">'/users/trash'</span> <span class="o">=&gt;</span> <span class="s1">'users#trash'</span><span class="p">,</span> <span class="ss">as: </span><span class="s2">"users_trash"</span>
  <span class="n">resources</span> <span class="ss">:users</span>
    <span class="n">member</span> <span class="k">do</span>
      <span class="o">...</span> 
      <span class="n">get</span> <span class="s1">':user_id'</span> <span class="o">=&gt;</span> <span class="s1">'users#show'</span>
    <span class="k">end</span>
    <span class="n">resources</span> <span class="ss">:user_roles</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:new</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="ss">:create</span><span class="p">]</span>
  <span class="k">end</span></code></pre></figure>

<p>Now this did function but it was in no way the rails way of doing things. Instead after some reading I learned the right way to do this was collection routes:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="n">resources</span> <span class="ss">:users</span> <span class="k">do</span>
    <span class="n">collection</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">'trash'</span>
    <span class="k">end</span>
    <span class="n">member</span> <span class="k">do</span>
      <span class="o">...</span>
    <span class="k">end</span>
  <span class="k">end</span></code></pre></figure>

<p>Leaving out my irrelevant member routes you can see I’ve added a collection route. <strong>Collection routes are routes that belongs to the entire collection of resources not just one member. Member routes are routes that apply an action to a specific member of the resource.</strong></p>

<p>So next time you need a route inside a resource don’t use a one-off use a collection route.</p>


</article>

    </div>
</div>

</body>
</html>
